<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="828" leftMargin="7" rightMargin="7" topMargin="7" bottomMargin="7" uuid="a7c1509d-f949-4eb2-be48-fb3c1c51872f">
	<property name="ireport.zoom" value="1.3310000000000006"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="fechaIni" class="java.util.Date">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<parameter name="fechaFin" class="java.util.Date"/>
	<parameter name="cuenta_id" class="java.lang.Integer"/>
	<parameter name="cuenta" class="java.lang.String"/>
	<parameter name="feha_fin_real" class="java.util.Date"/>
	<parameter name="escudo1" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
    char_length(trim(to_char(numero_recibo,'999999999'))) as cant,trim(to_char(numero_recibo,'999999999')) as num_rec,
     ingresos."numero_recibo",
     ingresos."cuota",
     ingresos."fechapago",
     COALESCE(ingresos."nombre",'') AS alumno_eventual,
     COALESCE(alumno."apellido"||' '||alumno."nombre",'') AS alumno,
     ingresos."cuenta_id",
     ingresos."tipoingreso_id",
     ingresos."importe",
     ingresos."alumno_id",
     ingresos."anulado",
     ingresos."formapago" ,

     ingresos.cohorte_id,
     COALESCE (ingresos."concepto",'') as concepto_eventual,
      COALESCE (ingresos_tipo_ingreso.descripcion,'') as tipoingreso,
COALESCE(cohorte.descripcion,'') as cohorte,
COALESCE(carrera.descripcion,'') as carerra,


ingresos.formapago,
ingresos.importe
FROM
     ingresos left JOIN  alumno ON ingresos."alumno_id" = alumno."id"
     left JOIN ingresos_tipo_ingreso ON ingresos."tipoingreso_id" = ingresos_tipo_ingreso."id"
     left join cohorte on ingresos.cohorte_id= cohorte.id
     left join carrera on cohorte.carrera_id=carrera.id
WHERE
     ingresos.fechapago BETWEEN $P{fechaIni} and $P{fechaFin}
     and ingresos.borrado = false
     and ingresos.cuenta_id = $P{cuenta_id}
and ingresos.anulado=false
and ingresos.importe<>0
 union
SELECT
    char_length(trim(to_char(numero_recibo,'999999999'))) as cant,trim(to_char(numero_recibo,'999999999')) as num_rec,
     ingresos."numero_recibo",
     ingresos."cuota",
     ingresos."fechapago",
     COALESCE(ingresos."nombre",'') AS alumno_eventual,
     COALESCE(alumno."apellido"||' '||alumno."nombre",'') AS alumno,
     ingresos."cuenta_id",
     ingresos."tipoingreso_id",
     ingresos."importe",
     ingresos."alumno_id",
     ingresos."anulado",
     ingresos."formapago" ,

     ingresos.cohorte_id,
     COALESCE (ingresos."concepto",'') as concepto_eventual,
      COALESCE (ingresos_tipo_ingreso.descripcion,'') as tipoingreso,
COALESCE(cohorte.descripcion,'') as cohorte,
COALESCE(carrera.descripcion,'') as carerra,


ingresos.formapago,
ingresos.importe
FROM
     ingresos left JOIN  alumno ON ingresos."alumno_id" = alumno."id"
     left JOIN ingresos_tipo_ingreso ON ingresos."tipoingreso_id" = ingresos_tipo_ingreso."id"
     left join cohorte on ingresos.cohorte_id= cohorte.id
     left join carrera on cohorte.carrera_id=carrera.id
WHERE
     ingresos.fechapago BETWEEN $P{fechaIni} and $P{fechaFin}
     and ingresos.borrado = false
     and ingresos.cuenta_id = $P{cuenta_id}
and ingresos.anulado=true
order by numero_recibo asc]]>
	</queryString>
	<field name="cant" class="java.lang.Integer"/>
	<field name="num_rec" class="java.lang.String"/>
	<field name="numero_recibo" class="java.lang.Integer"/>
	<field name="cuota" class="java.lang.Integer"/>
	<field name="fechapago" class="java.sql.Date"/>
	<field name="alumno_eventual" class="java.lang.String"/>
	<field name="alumno" class="java.lang.String"/>
	<field name="cuenta_id" class="java.lang.Long"/>
	<field name="tipoingreso_id" class="java.lang.Long"/>
	<field name="importe" class="java.math.BigDecimal"/>
	<field name="alumno_id" class="java.lang.Long"/>
	<field name="anulado" class="java.lang.Boolean"/>
	<field name="formapago" class="java.lang.String"/>
	<field name="cohorte_id" class="java.lang.Long"/>
	<field name="concepto_eventual" class="java.lang.String"/>
	<field name="tipoingreso" class="java.lang.String"/>
	<field name="cohorte" class="java.lang.String"/>
	<field name="carerra" class="java.lang.String"/>
	<variable name="Total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_1" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_2" class="java.math.BigDecimal" resetType="Column" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_3" class="java.math.BigDecimal" resetType="Column" incrementType="Report" calculation="Average">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_4" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="109" splitType="Stretch">
			<image>
				<reportElement x="0" y="0" width="244" height="36" uuid="e5b4964a-952b-4c1c-981f-71930a7bf288"/>
				<imageExpression><![CDATA[$P{escudo1}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="283" y="16" width="240" height="20" uuid="584c0786-5dfa-4d16-8a90-a766562d856e"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Facultad de Humanidades-UNCa.]]></text>
			</staticText>
			<textField>
				<reportElement x="362" y="56" width="100" height="20" uuid="1a06d5e7-e100-4bc9-bcd4-641ad2eb5909"/>
				<textElement>
					<font isBold="true" isUnderline="true"/>
				</textElement>
				<textFieldExpression><![CDATA["PTO. " + $P{cuenta}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="255" y="36" width="150" height="20" uuid="72ff6172-b441-4ccd-b77c-15252d8b738b"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Recursos Propios Perído]]></text>
			</staticText>
			<textField pattern="dd/MM/yy">
				<reportElement x="405" y="36" width="57" height="20" uuid="cdbb0fd5-7aed-4309-86cf-59f71dc8bbdb"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{fechaIni}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="460" y="36" width="11" height="20" uuid="6ea06c77-bef8-436a-ad55-e27c53ba3665"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[al]]></text>
			</staticText>
			<textField pattern="dd/MM/yy">
				<reportElement x="478" y="36" width="67" height="20" uuid="90d1b2f3-ff36-4c7e-b7b1-6d7e5855ed16"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{feha_fin_real}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="701" y="57" width="80" height="20" uuid="e473a756-1d10-4039-81a1-2194d84a50e9"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="781" y="57" width="40" height="20" uuid="adde244a-1f8b-4828-9643-8c6d0b8b70fb"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="22" splitType="Stretch">
			<staticText>
				<reportElement x="768" y="1" width="58" height="20" uuid="38aa1428-5787-4f10-8050-78c44161136b"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Forma Pago]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="1" width="135" height="20" uuid="d31506a3-0eb3-45d0-9408-32d0fc76fa91"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Titular]]></text>
			</staticText>
			<staticText>
				<reportElement x="256" y="1" width="307" height="20" uuid="2c7e85a7-ec4e-4062-bed9-c9fbe7d72834"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Concepto]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="1" width="64" height="20" uuid="e11de084-6ca3-4b1f-8e2b-7eff9957d199"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[N° Recibo]]></text>
			</staticText>
			<staticText>
				<reportElement x="65" y="1" width="56" height="20" uuid="f838f3b2-2909-4d47-906b-46774ffd6618"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha Pago]]></text>
			</staticText>
			<staticText>
				<reportElement x="717" y="1" width="51" height="20" uuid="d15f71d3-1def-44f5-a7f6-a7ab1f51bcae"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<staticText>
				<reportElement x="563" y="1" width="153" height="20" uuid="5150dba6-fd94-47ce-993b-2cbaeb574bfd"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Rubro Principal Presupuestario]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="0" width="828" height="1" uuid="64538f3f-5a4c-4f31-be2f-6646e38370ca"/>
			</line>
			<line>
				<reportElement x="0" y="21" width="828" height="1" uuid="2251a8f8-55fb-4695-a8fb-94dccd7a41ff"/>
			</line>
			<line>
				<reportElement x="64" y="0" width="1" height="21" uuid="0953bd02-c300-4efd-84d8-f4798ed93067"/>
			</line>
			<line>
				<reportElement x="120" y="1" width="1" height="20" uuid="a05550a0-be99-4119-9aba-01bfb96081f5"/>
			</line>
			<line>
				<reportElement x="0" y="1" width="1" height="20" uuid="61ec82bf-18f6-468e-849d-1d208a6aa276"/>
			</line>
			<line>
				<reportElement x="255" y="1" width="1" height="20" uuid="2f7243e1-443d-4fdb-bb12-bde603118464"/>
			</line>
			<line>
				<reportElement x="563" y="1" width="1" height="20" uuid="86c1e891-771a-4cdd-80fe-53d7b9d1ce0e"/>
			</line>
			<line>
				<reportElement x="716" y="1" width="1" height="20" uuid="62a0ee3d-1259-4d9f-a85e-80f5b96691b2"/>
			</line>
			<line>
				<reportElement x="767" y="1" width="1" height="20" uuid="5c8dfce3-863b-4029-803d-2372c9f1f970"/>
			</line>
			<line>
				<reportElement x="828" y="0" width="1" height="22" uuid="18d05784-7293-4a9c-9ad7-476a51fadcc9"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="24" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement x="121" y="0" width="134" height="23" uuid="29d22ebb-6ca3-4cd7-963d-ca6087205748"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{anulado}== true?"ANULADO":$F{alumno_eventual} + $F{alumno})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="256" y="0" width="307" height="23" uuid="6706c5dc-e3cf-41ef-a86d-87078a39d2ea"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[(($F{anulado}== true?"":$F{concepto_eventual}+"  "+$F{tipoingreso}+"  "+$F{cohorte}+"  " + $F{carerra})+
($F{cuota}>0?", cuota: "+$F{cuota}:""))]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="23" width="828" height="1" uuid="fd776648-5f9d-4ed8-87c0-767f7c4d64bc"/>
			</line>
			<textField isStretchWithOverflow="true">
				<reportElement x="0" y="0" width="64" height="23" uuid="64cf9308-d05b-4e47-90a6-af82708e52d4"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cant}==1?$P{cuenta}+"-"+"0000000"+$F{num_rec}:$F{cant}==2?$P{cuenta}+"-"+"000000"+$F{num_rec}:$F{cant}==3?$P{cuenta}+"-"+"00000"+$F{num_rec}:$F{cant}==4?$P{cuenta}+"-"+"0000"+$F{num_rec}:$F{cant}==5?$P{cuenta}+"-"+"000"+$F{num_rec}:$F{cant}==6?$P{cuenta}+"-"+"00"+$F{num_rec}:$F{cant}==7?$P{cuenta}+"-"+"0"+$F{num_rec}:$F{cant}==8?$P{cuenta}+"-"+$F{num_rec}:$F{num_rec}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd/MM/yyyy">
				<reportElement stretchType="RelativeToTallestObject" x="65" y="0" width="55" height="23" uuid="ded13cbc-abf3-49bc-8f69-f14c9017c967"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fechapago}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="717" y="0" width="51" height="23" uuid="b0aec1ec-80e0-4a70-90fc-2f79067ea70a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["$ "+($F{importe} == null? 0.0 :$F{importe})]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="770" y="0" width="58" height="23" uuid="4449c0df-c234-4767-8cba-1ee3faa3462e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{formapago}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="563" y="0" width="153" height="23" uuid="afc4f87c-01c6-46b8-9e2b-c5487f5ccc17"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[FUENTE 12- R PROPIOS]]></text>
			</staticText>
			<line>
				<reportElement x="120" y="0" width="1" height="23" uuid="e37f7ec9-3f02-41f7-b883-9dd67943ed6d"/>
			</line>
			<line>
				<reportElement x="64" y="0" width="1" height="23" uuid="c5b03458-2c53-4308-944e-565c4ad66547"/>
			</line>
			<line>
				<reportElement x="0" y="0" width="1" height="23" uuid="fd5f920c-2dc0-4b3c-9b49-468cb2d2177e"/>
			</line>
			<line>
				<reportElement x="255" y="0" width="1" height="23" uuid="cd1dc628-efdf-4c90-a29b-16ecc6c301cd"/>
			</line>
			<line>
				<reportElement x="563" y="0" width="1" height="23" uuid="dd4d401d-5336-4ec3-bf69-727ab7c35011"/>
			</line>
			<line>
				<reportElement x="716" y="0" width="1" height="23" uuid="dbe5ba48-24e3-4a45-8634-e98bd8cc483d"/>
			</line>
			<line>
				<reportElement x="767" y="0" width="1" height="23" uuid="c0a2fb11-4807-47f6-be86-ced65db037bf"/>
			</line>
			<line>
				<reportElement x="828" y="0" width="1" height="24" uuid="ab4fc47d-11d9-4f93-9979-907adb40421e"/>
			</line>
		</band>
	</detail>
	<columnFooter>
		<band height="22" splitType="Prevent">
			<textField>
				<reportElement x="706" y="2" width="77" height="20" uuid="20b90059-a2d0-4d6f-92f5-907ce7413068"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["$ "+$V{importe_2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="436" y="2" width="57" height="20" uuid="7abb0425-4267-4e6e-a77d-32029be17603"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SUBTOTAL]]></text>
			</staticText>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="24">
			<textField>
				<reportElement x="706" y="2" width="77" height="20" uuid="6d1da159-35ea-4efc-a35e-cea890c2c1e2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["$ "+$V{importe_4}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="436" y="2" width="57" height="20" uuid="51a411fd-22ae-4e65-9f19-92ea7e684212"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
